<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{{ 'Update' if action == 'notes.update_note' else 'Add' }} Note</title>
</head>
<body>
    <h2>{{ 'Update Note' if action == 'notes.update_note' else 'Add Note'}}</h2>
    {% if error %}
        <p>{{error}}</p>
    {% endif %}
    <form method="POST" action="{{ url_for(action, note_id=note.note_id if note else None)}}">
        <label for="title">Title:</label><br>
        <input type="text" id="title" name="title" required value="{{ note.title if note else '' }}"><br><br>

        <label for="isbn">ISBN:</label><br>
        <input type="text" id="isbn" name="isbn" required value="{{ note.isbn if note else '' }}"><br><br>

        <label for="price">Price:</label><br>
        <input type="number" step="0.01" id="price" name="price" required value="{{ note.price if note else '' }}"><br><br>

        <label for="description">Description:</label><br>
        <textarea id="description" name="description">{{ note.description if note else '' }}</textarea><br><br>

        <label for="condition">Condition:</label><br>
        <select name="condition" id="condition" required>
            {% set conditions = ['Minimum', 'Good', 'Brand New'] %}
            {% for cond in conditions %}
                <option value="{{ cond }}" {% if note and note.condition == cond %}selected{% endif %}>{{ cond }}</option>
            {% endfor %}
        </select><br><br>

        <label for="pickup_location">Pickup Location:</label><br>
        <input type="text" id="pickup_location" name="pickup_location" required value="{{ note.pickup_location if note else '' }}"><br><br>

        <label for="available_date">Available Date:</label><br>
        <input type="date" id="available_date" name="available_date" required value="{{ note.available_date.strftime('%Y-%m-%d') if note else '' }}"><br><br>

        <label for="is_lend">Lend/Sell</label>
        <select name="is_lend" id="is_lend" required>
            <option value="lend" {% if note and note.is_lend %}selected{% endif %}>Lend</option>
            <option value="sell" {% if note and not note.is_lend %}selected{% endif %}>Sell</option>
        </select>

        <button type="submit">{{ 'Update Note' if action == 'notes.update_note' else 'Add Note' }}</button>
    </form>
</body>
</html>